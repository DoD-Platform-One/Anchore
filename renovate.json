{
  "baseBranches": ["main"],
  "dependencyDashboard": "true",
  "dependencyDashboardHeader": "- [ ] Sync upstream helm chart version with updated dependencies.",
  "dependencyDashboardTitle": "Renovate: Upgrade Anchore Enterprise Package Dependencies",
  "draftPR": "true",
  "labels": ["anchore","Big Bang Add-Ons","Package Sustainment","kind::maintenance"],
  "commitMessagePrefix": "SKIP UPDATE CHECK",
  "packageRules": [
    {
      "matchDatasources": ["docker"],
      "groupName": "Anchore"
    }
  ],
  "separateMajorMinor": "false",
  "ignoreDeps": ["docker.io/bitnami/redis-sentinel", "docker.io/bitnami/redis-sentinel-exporter", "docker.io/bitnami/bitnami-shell", "gcr.io/cloudsql-docker/gce-proxy"],
  "ignorePaths": ["chart/deps/postgresql/**", "chart/deps/redis/**"],
  "regexManagers": [
    {
      "fileMatch": ["^chart/values\\.yaml$"],
      "matchStrings": [
        "image:\\s+registry1.dso.mil/ironbank/anchore/engine/engine:(?<currentValue>.+)"
      ],
      "depNameTemplate": "ironbank/anchore/engine/engine",
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://registry1.dso.mil"
    },
    {
      "fileMatch": ["^chart/values\\.yaml$"],
      "matchStrings": [
        "image:\\s+registry1.dso.mil/ironbank/anchore/enterprise/enterprise:(?<currentValue>.+)"
      ],
      "depNameTemplate": "ironbank/anchore/enterprise/enterprise",
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://registry1.dso.mil"
    },
    {
      "fileMatch": ["^chart/values\\.yaml$"],
      "matchStrings": [
        "image:\\s+registry1.dso.mil/ironbank/anchore/enterpriseui/enterpriseui:(?<currentValue>.+)"
      ],
      "depNameTemplate": "ironbank/anchore/enterpriseui/enterpriseui",
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://registry1.dso.mil"
    },
    {
      "fileMatch": ["^chart/values\\.yaml$"],
      "matchStrings": [
        "image:\\s+registry1.dso.mil/ironbank/opensource/postgres/*:(?<currentValue>.+)"
      ],
      "depNameTemplate": "ironbank/opensource/postgres",
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://registry1.dso.mil"
    },
    {
      "fileMatch": ["^chart/deps/redis/Chart\\.yaml$"],
      "matchStrings": [
        "version:\\s+(?<currentValue>.+)"
      ],
      "depNameTemplate": "https://repo1.dso.mil/platform-one/big-bang/apps/application-utilities/redis.git",
      "datasourceTemplate": "git-tags",
      "versioningTemplate": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)-bb\\.(?<build>\\d+)$"
    },    
    {
      "fileMatch": ["^chart/Chart\\.yaml$"],
      "matchStrings": [
        "appVersion:[^\\S\\r\\n]+(?<currentValue>.+)"
      ],
      "registryUrlTemplate": "https://registry1.dso.mil",
      "depNameTemplate": "ironbank/anchore/engine/engine",
      "datasourceTemplate": "docker"
    },
    {
      "fileMatch": ["^chart/Chart\\.yaml$"],
      "matchStrings": [
        "- Engine:\\s+(?<currentValue>.+)"
      ],
      "registryUrlTemplate": "https://registry1.dso.mil",
      "depNameTemplate": "ironbank/anchore/engine/engine",
      "datasourceTemplate": "docker"
    },
    {
      "fileMatch": ["^chart/Chart\\.yaml$"],
      "matchStrings": [
        "- Enterprise:\\s+(?<currentValue>.+)"
      ],
      "registryUrlTemplate": "https://registry1.dso.mil",
      "depNameTemplate": "ironbank/anchore/enterprise/enterprise",
      "datasourceTemplate": "docker"
    },
    {
      "fileMatch": ["^tests/images\\.txt$"],
      "matchStrings": [
        "s*(?<depName>.+):(?<currentValue>.+)"
      ],
      "datasourceTemplate": "docker"
    }
  ]
}
