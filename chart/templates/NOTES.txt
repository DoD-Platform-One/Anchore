{{- if not .Values.anchoreEnterpriseGlobal.enabled }}
WARNING - As of 2023, Anchore Engine is no longer maintained. There will be no future versions released. Users are advised to use Syft and Grype.
{{- end }}

To use Anchore you need the URL, username, and password to access the API and/or the UI.

Anchore can be accessed via port {{ .Values.anchoreApi.service.port }} on the following DNS name from within the cluster:
{{ template "anchore-engine.api.serviceName" . }}.{{ .Release.Namespace }}.svc.cluster.local

* NOTE: On first startup of Anchore, the policy-engine performs a CVE data sync which may take several minutes to complete. During this time the system status will report 'partially_down' and any images added for analysis will stay in the 'not_analyzed' state.
Once the sync is complete, any queued images will be analyzed and the system status will change to 'all_up'.

Initial setup time can be >120sec for postgresql setup and readiness checks to pass for the services as indicated by pod state. You can check with:
    kubectl get pods -l app={{ template "anchore-engine.fullname" .}},component=api
